jQuery(document).ready(function(){function e(e){return e?"addClass":"removeClass"}function t(e,t,o){console.log("Starting ajax call to WP to find dupe titles");var s={action:"title_check",post_title:e,post_type:o,post_id:t};jQuery.ajax({cache:!1,type:"POST",url:ajaxurl,data:s,dataType:"json",mimeType:"application/json"}).done(function(e){console.log("logging response: "+JSON.stringify(e,null,4)),i(e)}).fail(function(e,t,o){console.log("logging error:  :: "+e+" :: "+t+" :: "+o),console.log("title: "+s.post_title+" post type: "+s.post_type+" post id: "+s.post_id);var a={status:"error",html:'<div id="duplicate-error" style="color:red;">'+objectL10n.error_message+" "+o+".</div>"};i(a)})}function i(e){if(jQuery(".duptitles").remove(),jQuery("#titlediv #title").css("background-image","").prop("readonly",!1).addClass("active").removeClass("disabled"),jQuery("button.duplicates").prop("disabled",!1).removeClass("disabled"),"true"===e.status){var t;t='<div id="duplicate-warning"><h3 style="padding-left: 0; color:red">'+e.notice.head+"</h3>",t+="<ul>";for(var i=e.posts,o=0;o<i.length;o++)t+="<li>",t+='<a href="'+i[o].link+'" >'+i[o].title+"</a>",t+="</li>";t+="<p>"+e.notice.foot+"</p></ul></div>",jQuery("#titlediv .inside").prepend('<div id="message" class="error fade duptitles"><p>'+t+"</p></div>").slideDown("slow",function(){jQuery("#titlediv #title").css({"background-image":'url("/wp-content/plugins/duplicate-detector/assets/imgs/halt.gif")',"background-repeat":"no-repeat","background-position":"99% 50%"})})}"false"===e.status?jQuery("#titlediv #title").css({"background-image":'url("/wp-content/plugins/duplicate-detector/assets/imgs/check.gif")',"background-repeat":"no-repeat","background-position":"99% 50%"}):("error"===e.status||"undefined"===e.status)&&jQuery("#titlediv #title").css({"background-image":'url("/wp-content/plugins/duplicate-detector/assets/imgs/halt.gif")',"background-repeat":"no-repeat","background-position":"99% 50%"}).delay(600,function(){jQuery("#titlediv .inside").prepend('<div id="message" class="error fade duptitles"><p>'+e.html+"</p></div>").slideDown("slow")})}jQuery("#titlediv #title").after('<button type="button" title="'+objectL10n.button_notice+'" value="clickme" onclick="jQuery.dupetitles();" id="duplicates" class="duplicates button">D</button>'),jQuery(document).on("input","#titlediv #title",function(){jQuery(this)[e(this.value)]("x")}).on("mousemove",".x",function(t){jQuery(this)[e(this.offsetWidth-40<t.clientX-this.getBoundingClientRect().left)]("onX")}).on("click",".onX",function(){jQuery(this).removeClass(function(){return console.log("Handler for .change() called."),jQuery.dupetitles(),jQuery(this).attr("class")}).change()}).on("keyup",function(){jQuery(this)[e(this.value)]("x"),jQuery("#titlediv #title").css({"background-image":'url("/wp-content/plugins/duplicate-detector/assets/imgs/warning.gif")',"background-repeat":"no-repeat","background-position":"99% 50%"})}),jQuery.dupetitles=function o(){var e=jQuery("#title").val().trim(),i=jQuery("#post_ID").val(),o=jQuery("#post_type").val();if(e){var s="/wp-admin/images/wpspin_light.gif";jQuery("#titlediv #title").css({"background-image":'url("'+s+'")',"background-repeat":"no-repeat","background-position":"98% 50%"}),jQuery("#titlediv #title").prop("readonly",!0).addClass("disabled").removeClass("active"),jQuery("button.duplicates").prop("disabled",!0).addClass("disabled"),t(e,i,o)}e||(jQuery("#title").val("").blur(),jQuery("#titlediv #title").css("background-image","").prop("readonly",!1).addClass("active").removeClass("disabled"))}});